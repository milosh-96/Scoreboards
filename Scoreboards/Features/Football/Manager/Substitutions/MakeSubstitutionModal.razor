@using Scoreboards.Data;
@using Scoreboards.Features.Football.Manager
@using Scoreboards.Data.Football;
                        <div class="modal modal-xl fade" id="makeSubstitution" tabindex="-1" aria-labelledby="makeSubstitutionLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                <h1 class="modal-title fs-5" id="makeSubstitutionLabel">Make Substitution</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label>Subbed Out Player</label>
                            <input class="form-control" type="text" @bind="SubbedOutPlayer" />
                        </div> 
                        <div class="form-group">
                            <label>Subbed In Player</label>
                            <input class="form-control" type="text" @bind="SubbedInPlayer" />
                        </div>
                    </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" @onclick="ConfirmSubstitution">Confirm</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
@code {
    [Parameter]
    public FootballEventsEnum Mode { get; set; } = FootballEventsEnum.None;
    [Parameter]
    public FootballEventBus EventBus { get; set; } = new FootballEventBus();

    public string SubbedOutPlayer { get; set; } = "";
    public string SubbedInPlayer { get; set; } = "";

    public void ConfirmSubstitution()
    {
        EventBus.Data = new List<KeyValuePair<FootballEventsDataKeysEnum, string>>()
        {
            new KeyValuePair<FootballEventsDataKeysEnum, string>(FootballEventsDataKeysEnum.Substitution_SubbedOutPlayer,SubbedOutPlayer),
            new KeyValuePair<FootballEventsDataKeysEnum, string>(FootballEventsDataKeysEnum.Substitution_SubbedInPlayer,SubbedInPlayer),
        };
        EventBus.EventType = Mode;
        EventBus.Activate(TimeSpan.FromSeconds(30));
        this.SubbedOutPlayer = "";
        this.SubbedInPlayer = "";
    }
}